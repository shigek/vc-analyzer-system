# TSSのステップごとの流れ

## 1. 秘密鍵の生成と分散
TSSにおける秘密鍵（署名鍵）の分散は、以下のいずれかの方法で行われます。

- 分散鍵生成（Distributed Key Generation - DKG）：

  - これがTSSの最も理想的な形で、推奨される方法です。
  - この場合、参加者 p1, p2, p3 の誰も単独で秘密鍵全体を作成しません。
  - 代わりに、p1, p2, p3 は、お互いに協力しながら暗号プロトコルを実行します。
  - このプロトコルの結果として、p1 は自分のシェア s1 を、p2 は自分のシェア s2 を、p3 は自分のシェア s3 をそれぞれ個別に生成・保有します。
  - このプロセス中、完全な秘密鍵 $S$ は一度もどこにも現れません。 各参加者は自分のシェアだけを知っており、他者のシェアを知ることはありません。
  - これにより、秘密鍵が最初から分散された状態で生まれ、単一障害点のリスクが極めて低くなります。
- 既存の秘密鍵からのシェア生成（Shamir's Secret Sharingなど）：

  - 既に存在する単一の秘密鍵 $S$ がある場合に、それを複数に分散させる方法です。
  - この場合、信頼できる第三者（または信頼できるシステム）が、一度 $S$ を生成し、その $S$ を秘密分散アルゴリズム（例：シャミアの秘密分散法）にかけることで、n 個のシェアを生成します。
  - そして、生成された n 個のシェアを、それぞれの参加者 p1, p2, p3 に安全に配布します。
  - この方法の欠点は、シェアを生成する最初の段階で、完全な秘密鍵 $S$ が一時的にせよ、その信頼できる第三者の手元に存在してしまうことです。この時点が単一障害点となりえます。

## 2.トランザクション署名プロセス
  トランザクション署名は、各々で断片で計算する
  
  tに協力してもらう、なんか知らないけどSで署名した感じになる

- TSSの核心です。
  - 署名が必要なトランザクション（メッセージ）が発生すると、しきい値 t 以上の参加者が署名プロセスに参加します。
  - 各参加者は、自分のシェアを秘密にしたまま、他の協力者と暗号学的なプロトコル（Multi-Party Computation - MPC）を実行します。このプロトコルは、複数ラウンドにわたる情報のやり取りと計算を含みます。
  - 重要なのは、このプロセスを通じて、**完全な秘密鍵 S がどの参加者の手元にも、あるいはどこか中央のサーバーにも「復元されることはない」**という点です。
  - 各参加者は、自分のシェアと、プロトコルの途中で他の参加者から受け取った中間データを使って、自分の部分的な計算を進めます。
  - 全ての協力者の計算が揃い、それらの結果が統合されると、最終的に**「1つの完全なデジタル署名」**が生成されます。
  - この生成された署名は、あたかも「もともと1つの秘密鍵 S が存在し、その鍵を使って署名されたかのように見える」ため、あなたが仰る「なんか知らないけどSで署名した感じになる」という表現が非常に的確です。

## 3. 署名の検証
    トランザクションを検証をする人はサインドトランザクションを公開鍵で検証する

- 詳細:
  - TSSによって生成された単一の署名は、通常のデジタル署名と全く同じ形式をしています。
  - そのため、ブロックチェーンやDAppなど、トランザクションを検証する側は、署名がTSSによって生成されたものだとは意識しません。
  - 彼らは、トランザクションに付与されたその署名と、対応する公開鍵を使って、署名が正当なものであるか（つまり、秘密鍵 S に対応する公開鍵と一致するか）を検証するだけです。